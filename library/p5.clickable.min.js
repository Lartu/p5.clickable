var cl_mouseWasPressed=!1,cl_lastHovered=null,cl_lastClicked=null,cl_clickables=[];function getTextBounds(b,c,d){let a=document.createElement("span");document.body.appendChild(a),a.style.font=c,a.style.fontSize=d+"px",a.style.height="auto",a.style.width="auto",a.style.position="absolute",a.style.whiteSpace="no-wrap",a.innerHTML=b;let e=Math.ceil(a.clientWidth),f=Math.ceil(a.clientHeight);return document.body.removeChild(a),[e,f]}function Clickable(a,b){this.x=a,this.y=b,this.width=100,this.height=50,this.color="#FFFFFF",this.cornerRadius=10,this.strokeWeight=2,this.stroke="#000000",this.text="Press Me",this.textColor="#000000",this.textSize=12,this.textFont="sans-serif",this.textScaled=!1,this.hoverCursorStyle="pointer",this.image=null,this.fitImage=!1,this.imageScale=1,this.tint=null,this.noTint=!0,this.filter=null,this.updateTextSize=function(){if(this.textScaled){for(let a=this.height;a>0;a--)if(getTextBounds(this.text,this.textFont,a)[0]<=this.width&&getTextBounds(this.text,this.textFont,a)[1]<=this.height){console.log("textbounds: "+getTextBounds(this.text,this.font,a)),console.log("boxsize: "+this.width+", "+this.height),this.textSize=a/2;break}}},this.updateTextSize(),this.onHover=function(){},this.onOutside=function(){},this.onPress=function(){},this.onRelease=function(){},this.locate=function(a,b){this.x=a,this.y=b},this.resize=function(a,b){this.width=a,this.height=b,this.updateTextSize()},this.drawImage=function(){push(),imageMode(CENTER);let e=this.x+this.width/2,f=this.y+this.height/2,a=this.width,b=this.height;if(this.fitImage){let c=this.image.width/this.image.height,d=this.width/this.height;c>d?(a=this.width,b=this.height*(d/c)):(a=this.width*(c/d),b=this.height)}image(this.image,e,f,a*this.imageScale,b*this.imageScale),this.tint&&!this.noTint?tint(this.tint):noTint(),this.filter&&filter(this.filter),pop()},this.draw=function(){push(),fill(this.color),stroke(this.stroke),strokeWeight(this.strokeWeight),rect(this.x,this.y,this.width,this.height,this.cornerRadius),fill(this.textColor),noStroke(),this.image&&this.drawImage(),textAlign(CENTER,CENTER),textSize(this.textSize),textFont(this.textFont),text(this.text,this.x+this.width/2,this.y+this.height/2),mouseX>=this.x&&mouseY>=this.y&&mouseX<this.x+this.width&&mouseY<this.y+this.height&&(cl_lastHovered=this,mouseIsPressed&&!cl_mouseWasPressed&&(cl_lastClicked=this)),pop()},cl_clickables.push(this)}p5.prototype.runGUI=function(){for(let a=0;a<cl_clickables.length;++a)cl_lastHovered!=cl_clickables[a]&&cl_clickables[a].onOutside();null==cl_lastHovered?cursor("initial"):cl_lastClicked!=cl_lastHovered&&(cursor(cl_lastHovered.hoverCursorStyle),cl_lastHovered.onHover()),cl_mouseWasPressed||null==cl_lastClicked||cl_lastClicked.onPress(),cl_mouseWasPressed&&!mouseIsPressed&&null!=cl_lastClicked&&(cl_lastClicked==cl_lastHovered&&cl_lastClicked.onRelease(),cl_lastClicked=null),cl_lastHovered=null,cl_mouseWasPressed=mouseIsPressed},p5.prototype.registerMethod("post",p5.prototype.runGUI)